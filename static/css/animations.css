/* ===== ADVANCED ANIMATIONS & EFFECTS ===== */

/* Probability Value Changes */
@keyframes probabilityUpdate {
    0% {
        transform: scale(1);
        color: inherit;
    }
    25% {
        transform: scale(1.1);
        color: #ffc107;
        text-shadow: 0 0 10px rgba(255, 193, 7, 0.6);
    }
    50% {
        transform: scale(1.15);
        color: #17a2b8;
        text-shadow: 0 0 15px rgba(23, 162, 184, 0.8);
    }
    100% {
        transform: scale(1);
        color: inherit;
        text-shadow: none;
    }
}

.probability-display.changing {
    animation: probabilityUpdate 0.8s ease-out;
}

.probability-display.changing .value {
    animation: probabilityUpdate 0.8s ease-out;
}

/* Component Card Updates */
@keyframes componentUpdate {
    0% {
        transform: translateY(0) scale(1);
        box-shadow: var(--shadow-sm);
    }
    50% {
        transform: translateY(-3px) scale(1.02);
        box-shadow: var(--shadow-lg);
    }
    100% {
        transform: translateY(0) scale(1);
        box-shadow: var(--shadow-sm);
    }
}

.component-card.updating {
    animation: componentUpdate 0.6s ease-out;
}

/* Reliability Bar Animations */
@keyframes barUpdate {
    0% {
        transform: scaleX(1);
        filter: brightness(1);
    }
    50% {
        transform: scaleX(1.05);
        filter: brightness(1.2);
    }
    100% {
        transform: scaleX(1);
        filter: brightness(1);
    }
}

.bar-fill.updating {
    animation: barUpdate 0.5s ease-out;
}

@keyframes barFailure {
    0% {
        width: var(--original-width, 100%);
        background: linear-gradient(90deg, var(--success-color), #10b981);
    }
    30% {
        width: 60%;
        background: linear-gradient(90deg, var(--warning-color), #f59e0b);
    }
    70% {
        width: 20%;
        background: linear-gradient(90deg, var(--error-color), #ef4444);
    }
    100% {
        width: 0%;
        background: var(--error-color);
    }
}

.bar-fill.failing {
    animation: barFailure 0.8s ease-out forwards;
}

@keyframes barRestore {
    0% {
        width: 0%;
        background: var(--error-color);
    }
    30% {
        width: 30%;
        background: linear-gradient(90deg, var(--warning-color), #f59e0b);
    }
    70% {
        width: 80%;
        background: linear-gradient(90deg, var(--success-color), #10b981);
    }
    100% {
        width: 100%;
        background: linear-gradient(90deg, var(--success-color), #10b981);
    }
}

.bar-fill.restoring {
    animation: barRestore 0.8s ease-out forwards;
}

/* Button Interactions */
@keyframes buttonPress {
    0% { transform: scale(1) translateY(0); }
    50% { transform: scale(0.95) translateY(1px); }
    100% { transform: scale(1) translateY(0); }
}

.action-btn:active,
.control-btn:active {
    animation: buttonPress 0.15s ease-out;
}

@keyframes buttonSuccess {
    0% { background: var(--original-bg); }
    50% { background: linear-gradient(135deg, var(--success-color), #10b981); }
    100% { background: var(--original-bg); }
}

@keyframes buttonError {
    0% { background: var(--original-bg); }
    50% { background: linear-gradient(135deg, var(--error-color), #ef4444); }
    100% { background: var(--original-bg); }
}

/* Status Indicator Animations */
@keyframes statusPulse {
    0% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(5, 150, 105, 0.7);
    }
    70% {
        transform: scale(1);
        box-shadow: 0 0 0 10px rgba(5, 150, 105, 0);
    }
    100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(5, 150, 105, 0);
    }
}

.status-dot {
    animation: statusPulse 2s infinite;
}

.status-dot.failed {
    animation: statusFailurePulse 1.5s infinite;
}

@keyframes statusFailurePulse {
    0% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.7);
    }
    70% {
        transform: scale(1);
        box-shadow: 0 0 0 8px rgba(220, 38, 38, 0);
    }
    100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(220, 38, 38, 0);
    }
}

/* 3D Tower Animations */
@keyframes componentFailure3D {
    0% {
        transform: translate(-50%, -50%) rotate(0deg) scale(1);
        opacity: 1;
        filter: brightness(1);
    }
    25% {
        transform: translate(-45%, -55%) rotate(-5deg) scale(1.05);
        filter: brightness(1.2);
    }
    50% {
        transform: translate(-40%, -40%) rotate(10deg) scale(0.95);
        opacity: 0.8;
        filter: brightness(0.8);
    }
    100% {
        transform: translate(100px, 50px) rotate(25deg) scale(0.9);
        opacity: 0.3;
        filter: brightness(0.5) grayscale(0.8);
    }
}

.popsicle-stick.failing {
    animation: componentFailure3D 0.8s ease-out forwards;
}

@keyframes componentRestore3D {
    0% {
        transform: translate(100px, 50px) rotate(25deg) scale(0.9);
        opacity: 0.3;
        filter: brightness(0.5) grayscale(0.8);
    }
    30% {
        transform: translate(-40%, -40%) rotate(-10deg) scale(1.1);
        opacity: 0.7;
        filter: brightness(1.1) grayscale(0.3);
    }
    70% {
        transform: translate(-52%, -52%) rotate(2deg) scale(1.05);
        opacity: 0.9;
        filter: brightness(1.2) grayscale(0.1);
    }
    100% {
        transform: translate(-50%, -50%) rotate(0deg) scale(1);
        opacity: 1;
        filter: brightness(1) grayscale(0);
    }
}

.popsicle-stick.restoring {
    animation: componentRestore3D 0.8s ease-out forwards;
}

/* Wire Power Flow */
@keyframes powerFlow {
    0% {
        background-position: 0% 0%;
        filter: brightness(1);
    }
    50% {
        background-position: 100% 100%;
        filter: brightness(1.3);
    }
    100% {
        background-position: 200% 200%;
        filter: brightness(1);
    }
}

.wire.active {
    background-size: 200% 200%;
    animation: powerFlow 2s linear infinite;
}

@keyframes connectionGlow {
    0%, 100% {
        box-shadow: 
            0 1px 3px rgba(0, 0, 0, 0.5),
            0 0 5px rgba(255, 215, 0, 0.5);
        transform: scale(1);
    }
    50% {
        box-shadow: 
            0 1px 3px rgba(0, 0, 0, 0.5),
            0 0 15px rgba(255, 215, 0, 0.9),
            0 0 25px rgba(255, 215, 0, 0.6);
        transform: scale(1.1);
    }
}

.connection-point.active {
    animation: connectionGlow 1.5s ease-in-out infinite;
}

/* LED Animations */
@keyframes ledPowerOn {
    0% {
        opacity: 0.3;
        transform: translateZ(5px) scale(0.8);
        filter: brightness(0.5);
    }
    50% {
        opacity: 0.9;
        transform: translateZ(7px) scale(1.1);
        filter: brightness(1.3);
    }
    100% {
        opacity: 1;
        transform: translateZ(5px) scale(1);
        filter: brightness(1);
    }
}

.led-lens.powering-on {
    animation: ledPowerOn 0.6s ease-out;
}

@keyframes ledPowerOff {
    0% {
        opacity: 1;
        transform: translateZ(5px) scale(1);
        filter: brightness(1);
    }
    100% {
        opacity: 0.3;
        transform: translateZ(3px) scale(0.9);
        filter: brightness(0.4) grayscale(0.8);
    }
}

.led-lens.powering-off {
    animation: ledPowerOff 0.4s ease-in forwards;
}

@keyframes ledGlow {
    0%, 100% { 
        box-shadow: 
            0 0 25px rgba(0, 255, 0, 0.8),
            0 0 50px rgba(0, 255, 0, 0.4);
        filter: brightness(1);
    }
    50% { 
        box-shadow: 
            0 0 35px rgba(0, 255, 0, 1),
            0 0 70px rgba(0, 255, 0, 0.6),
            0 0 90px rgba(0, 255, 0, 0.3);
        filter: brightness(1.1);
    }
}

.led-lens:not(.off) {
    animation: ledGlow 2s ease-in-out infinite;
}

/* Drop Zone Animations */
@keyframes dropZoneActivate {
    0% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.8);
        border-color: transparent;
    }
    50% {
        opacity: 0.8;
        transform: translate(-50%, -50%) scale(1.1);
        border-color: var(--success-color);
    }
    100% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
        border-color: var(--success-color);
    }
}

.drop-zone.activating {
    animation: dropZoneActivate 0.4s ease-out;
}

@keyframes dropZonePulse {
    0%, 100% { 
        transform: translate(-50%, -50%) scale(1);
        border-color: var(--success-color);
        background: rgba(40, 167, 69, 0.1);
    }
    50% { 
        transform: translate(-50%, -50%) scale(1.05);
        border-color: #20c997;
        background: rgba(32, 201, 151, 0.15);
    }
}

.drop-zone.active {
    animation: dropZonePulse 2s ease-in-out infinite;
}

/* Notification Animations */
@keyframes notificationSlideIn {
    0% {
        transform: translateX(450px);
        opacity: 0;
    }
    100% {
        transform: translateX(0);
        opacity: 1;
    }
}

.notification.show {
    animation: notificationSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes notificationSlideOut {
    0% {
        transform: translateX(0);
        opacity: 1;
    }
    100% {
        transform: translateX(450px);
        opacity: 0;
    }
}

.notification.hiding {
    animation: notificationSlideOut 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* Modal Animations */
@keyframes modalFadeIn {
    0% {
        opacity: 0;
        backdrop-filter: blur(0px);
    }
    100% {
        opacity: 1;
        backdrop-filter: blur(8px);
    }
}

.modal-overlay.show {
    animation: modalFadeIn 0.3s ease-out;
}

@keyframes modalScaleIn {
    0% {
        transform: scale(0.7);
        opacity: 0;
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}

.modal-overlay.show .educational-modal {
    animation: modalScaleIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Particle Animations */
@keyframes particleFloat {
    0% {
        transform: translate(0, 0) scale(1) rotate(0deg);
        opacity: 1;
    }
    100% {
        transform: translate(var(--particle-x, 0), var(--particle-y, -100px)) scale(0.1) rotate(360deg);
        opacity: 0;
    }
}

.particle {
    animation: particleFloat 2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

/* System-wide Effects */
@keyframes systemShake {
    0%, 100% { transform: translate(0, 0); }
    10% { transform: translate(-5px, -2px); }
    20% { transform: translate(5px, 2px); }
    30% { transform: translate(-3px, 0px); }
    40% { transform: translate(3px, -1px); }
    50% { transform: translate(-2px, 1px); }
    60% { transform: translate(2px, -1px); }
    70% { transform: translate(-1px, 0px); }
    80% { transform: translate(1px, 0px); }
    90% { transform: translate(-1px, 0px); }
}

.system-shake {
    animation: systemShake 0.5s ease-out;
}

@keyframes celebrationBurst {
    0% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.1);
        opacity: 0.8;
    }
    100% {
        transform: scale(1.2);
        opacity: 0;
    }
}

.celebration-burst {
    animation: celebrationBurst 0.6s ease-out;
}

/* Loading States */
@keyframes loadingSpinner {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.loading-spinner {
    animation: loadingSpinner 1s linear infinite;
}

@keyframes loadingPulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(1.05); }
}

.loading-pulse {
    animation: loadingPulse 1.5s ease-in-out infinite;
}

/* Hover Enhancements */
@keyframes hoverGlow {
    0% { box-shadow: var(--shadow-sm); }
    100% { box-shadow: var(--shadow-lg), 0 0 20px rgba(37, 99, 235, 0.3); }
}

.component-card:hover {
    animation: hoverGlow 0.3s ease-out forwards;
}

@keyframes buttonHover {
    0% { transform: translateY(0); }
    100% { transform: translateY(-2px); }
}

.action-btn:hover,
.control-btn:hover {
    animation: buttonHover 0.2s ease-out forwards;
}

/* Accessibility - Reduced Motion */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
    
    .status-dot {
        animation: none;
    }
    
    .led-lens {
        animation: none !important;
    }
    
    .wire.active {
        animation: none;
    }
    
    .connection-point.active {
        animation: none;
    }
    
    .drop-zone.active {
        animation: none;
    }
    
    .particle {
        display: none;
    }
}
