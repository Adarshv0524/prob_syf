<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Probability Tower - Series System Reliability</title>
    <link rel="stylesheet" href="static/css/main.css">
    <link rel="stylesheet" href="static/css/components.css">
    <link rel="stylesheet" href="static/css/tower-3d.css">
</head>
<body>
    <div class="app-container">
        <!-- Left Control Panel -->
        <div class="control-panel">
            <header class="panel-header">
                <h1><span class="icon">🔬</span>Probability Tower Lab</h1>
                <div class="system-status">
                    <div class="status-indicator" id="systemStatus">
                        <div class="status-dot active"></div>
                        <span class="status-text">System Operational</span>
                    </div>
                </div>
            </header>

            <!-- Probability Mathematics Display -->
            <section class="probability-section">
                <div class="section-header">
                    <h3><span class="icon">📊</span>System Probability</h3>
                </div>
                <div class="probability-display">
                    <div class="main-probability">
                        <span class="value" id="systemProbability">1.00</span>
                        <span class="percentage" id="systemPercentage">100%</span>
                    </div>
                    <div class="equation-display">
                        <div class="equation-label">Calculation:</div>
                        <div class="equation" id="probabilityEquation">P(System) = 1 × 1 × 1 × 1 = 1.00</div>
                    </div>
                </div>
            </section>

            <!-- Component Control Grid -->
            <section class="components-section">
                <div class="section-header">
                    <h3><span class="icon">🔧</span>Components Status</h3>
                    <div class="component-legend">
                        <span class="legend-item working"><span class="dot"></span>Working</span>
                        <span class="legend-item failed"><span class="dot"></span>Failed</span>
                    </div>
                </div>
                
                <div class="components-grid">
                    <!-- Component A -->
                    <div class="component-card" data-component="A" id="componentCardA">
                        <div class="component-header">
                            <div class="component-icon">
                                <div class="popsicle-stick-icon"></div>
                            </div>
                            <div class="component-info">
                                <h4>Popsicle Stick A</h4>
                                <span class="component-position">Bottom Level</span>
                            </div>
                        </div>
                        <div class="component-metrics">
                            <div class="probability-metric">
                                <span class="metric-label">Probability:</span>
                                <span class="metric-value" id="probA">1.00</span>
                            </div>
                            <div class="reliability-bar">
                                <div class="bar-track">
                                    <div class="bar-fill" id="barA" style="width: 100%"></div>
                                </div>
                                <span class="bar-percentage">100%</span>
                            </div>
                        </div>
                        <div class="component-actions">
                            <button class="action-btn fail-btn" data-component="A">
                                <span class="btn-icon">⚡</span>
                                <span>Fail</span>
                            </button>
                            <button class="action-btn restore-btn hidden" data-component="A">
                                <span class="btn-icon">🔧</span>
                                <span>Restore</span>
                            </button>
                        </div>
                    </div>

                    <!-- Component B -->
                    <div class="component-card" data-component="B" id="componentCardB">
                        <div class="component-header">
                            <div class="component-icon">
                                <div class="popsicle-stick-icon"></div>
                            </div>
                            <div class="component-info">
                                <h4>Popsicle Stick B</h4>
                                <span class="component-position">Level 2</span>
                            </div>
                        </div>
                        <div class="component-metrics">
                            <div class="probability-metric">
                                <span class="metric-label">Probability:</span>
                                <span class="metric-value" id="probB">1.00</span>
                            </div>
                            <div class="reliability-bar">
                                <div class="bar-track">
                                    <div class="bar-fill" id="barB" style="width: 100%"></div>
                                </div>
                                <span class="bar-percentage">100%</span>
                            </div>
                        </div>
                        <div class="component-actions">
                            <button class="action-btn fail-btn" data-component="B">
                                <span class="btn-icon">⚡</span>
                                <span>Fail</span>
                            </button>
                            <button class="action-btn restore-btn hidden" data-component="B">
                                <span class="btn-icon">🔧</span>
                                <span>Restore</span>
                            </button>
                        </div>
                    </div>

                    <!-- Component C -->
                    <div class="component-card" data-component="C" id="componentCardC">
                        <div class="component-header">
                            <div class="component-icon">
                                <div class="popsicle-stick-icon"></div>
                            </div>
                            <div class="component-info">
                                <h4>Popsicle Stick C</h4>
                                <span class="component-position">Level 3</span>
                            </div>
                        </div>
                        <div class="component-metrics">
                            <div class="probability-metric">
                                <span class="metric-label">Probability:</span>
                                <span class="metric-value" id="probC">1.00</span>
                            </div>
                            <div class="reliability-bar">
                                <div class="bar-track">
                                    <div class="bar-fill" id="barC" style="width: 100%"></div>
                                </div>
                                <span class="bar-percentage">100%</span>
                            </div>
                        </div>
                        <div class="component-actions">
                            <button class="action-btn fail-btn" data-component="C">
                                <span class="btn-icon">⚡</span>
                                <span>Fail</span>
                            </button>
                            <button class="action-btn restore-btn hidden" data-component="C">
                                <span class="btn-icon">🔧</span>
                                <span>Restore</span>
                            </button>
                        </div>
                    </div>

                    <!-- Component D -->
                    <div class="component-card" data-component="D" id="componentCardD">
                        <div class="component-header">
                            <div class="component-icon">
                                <div class="popsicle-stick-icon"></div>
                            </div>
                            <div class="component-info">
                                <h4>Popsicle Stick D</h4>
                                <span class="component-position">Top Level</span>
                            </div>
                        </div>
                        <div class="component-metrics">
                            <div class="probability-metric">
                                <span class="metric-label">Probability:</span>
                                <span class="metric-value" id="probD">1.00</span>
                            </div>
                            <div class="reliability-bar">
                                <div class="bar-track">
                                    <div class="bar-fill" id="barD" style="width: 100%"></div>
                                </div>
                                <span class="bar-percentage">100%</span>
                            </div>
                        </div>
                        <div class="component-actions">
                            <button class="action-btn fail-btn" data-component="D">
                                <span class="btn-icon">⚡</span>
                                <span>Fail</span>
                            </button>
                            <button class="action-btn restore-btn hidden" data-component="D">
                                <span class="btn-icon">🔧</span>
                                <span>Restore</span>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- System Controls -->
            <section class="controls-section">
                <div class="section-header">
                    <h3><span class="icon">🎮</span>System Controls</h3>
                </div>
                <div class="controls-grid">
                    <button class="control-btn primary" id="resetAllBtn">
                        <span class="btn-icon">🔄</span>
                        <span class="btn-text">Reset All</span>
                    </button>
                    <button class="control-btn secondary" id="randomFailBtn">
                        <span class="btn-icon">🎲</span>
                        <span class="btn-text">Random Fail</span>
                    </button>
                    <button class="control-btn tertiary" id="educationBtn">
                        <span class="btn-icon">📚</span>
                        <span class="btn-text">Learn More</span>
                    </button>
                </div>
            </section>

            <!-- Instructions -->
            <section class="instructions-section">
                <div class="section-header">
                    <h3><span class="icon">📋</span>How to Use</h3>
                </div>
                <div class="instructions-list">
                    <div class="instruction-item">
                        <span class="instruction-icon">🖱️</span>
                        <span class="instruction-text">Drag components to remove them</span>
                    </div>
                    <div class="instruction-item">
                        <span class="instruction-icon">🎯</span>
                        <span class="instruction-text">Drop back to restore connection</span>
                    </div>
                    <div class="instruction-item">
                        <span class="instruction-icon">⚡</span>
                        <span class="instruction-text">Use buttons for instant control</span>
                    </div>
                    <div class="instruction-item">
                        <span class="instruction-icon">📊</span>
                        <span class="instruction-text">Watch probability calculations</span>
                    </div>
                </div>
            </section>
        </div>

        <!-- Right 3D Tower Visualization -->
        <div class="tower-visualization">
            <div class="visualization-header">
                <h2>3D Probability Tower</h2>
                <div class="view-controls">
                    <button class="view-btn active" data-view="default" title="Default View">
                        <span>🎯</span>
                    </button>
                    <button class="view-btn" data-view="top" title="Top View">
                        <span>⬆️</span>
                    </button>
                    <button class="view-btn" data-view="side" title="Side View">
                        <span>↔️</span>
                    </button>
                    <button class="view-btn" data-view="front" title="Front View">
                        <span>👁️</span>
                    </button>
                </div>
            </div>

            <div class="tower-scene" id="towerScene">
                <div class="scene-container">
                    <!-- LED Assembly with Direct Mounting -->
                    <div class="led-assembly" id="ledAssembly">
                        <div class="led-component">
                            <div class="led-lens" id="ledLens"></div>
                            <div class="led-body"></div>
                            <div class="led-legs">
                                <div class="led-leg positive"></div>
                                <div class="led-leg negative"></div>
                            </div>
                        </div>
                        <div class="led-mount-point" id="ledMountPoint">
                            <div class="mount-connector"></div>
                        </div>
                    </div>

                    <!-- Tower Stack -->
                    <div class="tower-stack" id="towerStack">
                        
                        <!-- Component D (Top) -->
                        <div class="tower-component" data-component="D" data-level="4">
                            <div class="component-mount-top" id="mountTopD">
                                <div class="mount-connector"></div>
                                <div class="wire-terminal positive"></div>
                                <div class="wire-terminal negative"></div>
                            </div>
                            
                            <div class="popsicle-stick" id="stickD" draggable="true">
                                <div class="stick-body">
                                    <div class="wood-texture"></div>
                                    <div class="stick-label">D</div>
                                    <div class="wire-channel">
                                        <div class="wire positive-wire"></div>
                                        <div class="wire negative-wire"></div>
                                    </div>
                                </div>
                                <div class="connection-points">
                                    <div class="connection-point top positive"></div>
                                    <div class="connection-point top negative"></div>
                                    <div class="connection-point bottom positive"></div>
                                    <div class="connection-point bottom negative"></div>
                                </div>
                            </div>
                            
                            <div class="component-mount-bottom" id="mountBottomD">
                                <div class="mount-connector"></div>
                                <div class="wire-terminal positive"></div>
                                <div class="wire-terminal negative"></div>
                            </div>
                            
                            <div class="drop-zone" data-component="D">
                                <div class="drop-indicator">
                                    <span class="drop-icon">📍</span>
                                    <span class="drop-text">Drop D Here</span>
                                </div>
                            </div>
                        </div>

                        <!-- Component C -->
                        <div class="tower-component" data-component="C" data-level="3">
                            <div class="component-mount-top" id="mountTopC">
                                <div class="mount-connector"></div>
                                <div class="wire-terminal positive"></div>
                                <div class="wire-terminal negative"></div>
                            </div>
                            
                            <div class="popsicle-stick" id="stickC" draggable="true">
                                <div class="stick-body">
                                    <div class="wood-texture"></div>
                                    <div class="stick-label">C</div>
                                    <div class="wire-channel">
                                        <div class="wire positive-wire"></div>
                                        <div class="wire negative-wire"></div>
                                    </div>
                                </div>
                                <div class="connection-points">
                                    <div class="connection-point top positive"></div>
                                    <div class="connection-point top negative"></div>
                                    <div class="connection-point bottom positive"></div>
                                    <div class="connection-point bottom negative"></div>
                                </div>
                            </div>
                            
                            <div class="component-mount-bottom" id="mountBottomC">
                                <div class="mount-connector"></div>
                                <div class="wire-terminal positive"></div>
                                <div class="wire-terminal negative"></div>
                            </div>
                            
                            <div class="drop-zone" data-component="C">
                                <div class="drop-indicator">
                                    <span class="drop-icon">📍</span>
                                    <span class="drop-text">Drop C Here</span>
                                </div>
                            </div>
                        </div>

                        <!-- Component B -->
                        <div class="tower-component" data-component="B" data-level="2">
                            <div class="component-mount-top" id="mountTopB">
                                <div class="mount-connector"></div>
                                <div class="wire-terminal positive"></div>
                                <div class="wire-terminal negative"></div>
                            </div>
                            
                            <div class="popsicle-stick" id="stickB" draggable="true">
                                <div class="stick-body">
                                    <div class="wood-texture"></div>
                                    <div class="stick-label">B</div>
                                    <div class="wire-channel">
                                        <div class="wire positive-wire"></div>
                                        <div class="wire negative-wire"></div>
                                    </div>
                                </div>
                                <div class="connection-points">
                                    <div class="connection-point top positive"></div>
                                    <div class="connection-point top negative"></div>
                                    <div class="connection-point bottom positive"></div>
                                    <div class="connection-point bottom negative"></div>
                                </div>
                            </div>
                            
                            <div class="component-mount-bottom" id="mountBottomB">
                                <div class="mount-connector"></div>
                                <div class="wire-terminal positive"></div>
                                <div class="wire-terminal negative"></div>
                            </div>
                            
                            <div class="drop-zone" data-component="B">
                                <div class="drop-indicator">
                                    <span class="drop-icon">📍</span>
                                    <span class="drop-text">Drop B Here</span>
                                </div>
                            </div>
                        </div>

                        <!-- Component A (Bottom) -->
                        <div class="tower-component" data-component="A" data-level="1">
                            <div class="component-mount-top" id="mountTopA">
                                <div class="mount-connector"></div>
                                <div class="wire-terminal positive"></div>
                                <div class="wire-terminal negative"></div>
                            </div>
                            
                            <div class="popsicle-stick" id="stickA" draggable="true">
                                <div class="stick-body">
                                    <div class="wood-texture"></div>
                                    <div class="stick-label">A</div>
                                    <div class="wire-channel">
                                        <div class="wire positive-wire"></div>
                                        <div class="wire negative-wire"></div>
                                    </div>
                                </div>
                                <div class="connection-points">
                                    <div class="connection-point top positive"></div>
                                    <div class="connection-point top negative"></div>
                                    <div class="connection-point bottom positive"></div>
                                    <div class="connection-point bottom negative"></div>
                                </div>
                            </div>
                            
                            <div class="component-mount-bottom" id="mountBottomA">
                                <div class="mount-connector"></div>
                                <div class="wire-terminal positive"></div>
                                <div class="wire-terminal negative"></div>
                            </div>
                            
                            <div class="drop-zone" data-component="A">
                                <div class="drop-indicator">
                                    <span class="drop-icon">📍</span>
                                    <span class="drop-text">Drop A Here</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Battery Assembly at Base -->
                    <div class="battery-assembly" id="batteryAssembly">
                        <div class="battery-housing">
                            <div class="battery-terminals">
                                <div class="terminal positive">+</div>
                                <div class="terminal negative">−</div>
                            </div>
                            <div class="battery-body">
                                <div class="battery-label">CR2032</div>
                                <div class="battery-voltage">3V</div>
                            </div>
                        </div>
                        <div class="base-connections">
                            <div class="base-wire positive"></div>
                            <div class="base-wire negative"></div>
                        </div>
                    </div>

                    <!-- Cardboard Base -->
                    <div class="cardboard-base">
                        <div class="base-surface">
                            <div class="corrugation-pattern"></div>
                            <div class="base-label">Probability Tower Base</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification System -->
    <div class="notification-system" id="notificationSystem">
        <div class="notification" id="notification">
            <div class="notification-content">
                <div class="notification-icon"></div>
                <div class="notification-text">
                    <div class="notification-title"></div>
                    <div class="notification-message"></div>
                </div>
            </div>
            <button class="notification-close" id="notificationClose">&times;</button>
        </div>
    </div>

    <!-- Educational Modal -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="educational-modal" id="educationalModal">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Educational Content</h3>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Educational content will be inserted here -->
            </div>
            <div class="modal-footer">
                <button class="modal-action-btn" id="modalActionBtn">Continue Learning</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="static/js/core-engine.js"></script>
    <script src="static/js/tower-renderer.js"></script>
    <script src="static/js/drag-system.js"></script>
    <script src="static/js/education-system.js"></script>
    <script src="static/js/app.js"></script>
</body>
</html>
